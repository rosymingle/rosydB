document.addEventListener("DOMContentLoaded",(()=>{if(!Array.from(document.querySelectorAll(".eacss")).some((el=>{const style=getComputedStyle(el);return el.classList.contains("preload")||"none"!==style.display&&"hidden"!==style.visibility})))return;(new class{constructor(){this.frontendBase="https://www.davidjones.com/images/assetimages/frontend/eacss/v4/",this.versionSuffix="?v23",this.loadedFiles=new Set,this.observedElements=new WeakSet}async loadFile(file,callback){const isJS=file.endsWith(".js"),isCSS=file.endsWith(".css");if(!isJS&&!isCSS||this.loadedFiles.has(file))return;const fileURL=/^https?:\/\//i.test(file)?file:this.frontendBase+file+this.versionSuffix,cleanURL=fileURL.split("?")[0];if([...document.querySelectorAll(isJS?"script":"link")].some((el=>(el.src||el.href||"").split("?")[0]===cleanURL)))return;const el=isJS?this.createElement("script",{src:fileURL,async:!0}):this.createElement("link",{rel:"stylesheet",href:fileURL});el.onload=()=>callback?.(),document.head.appendChild(el),this.loadedFiles.add(file)}createElement(tag,attrs){const el=document.createElement(tag);return Object.keys(attrs).forEach((attr=>el.setAttribute(attr,attrs[attr]))),el}loadCoreFiles(){const coreEls=document.querySelectorAll(".eacss");if(!coreEls.length)return;const allClasses=new Set;coreEls.forEach((el=>el.classList.forEach((cls=>allClasses.add(cls)))));["ea.css",allClasses.has("full-wid")&&"full-width.css"].filter(Boolean).forEach((file=>this.loadFile(file))),allClasses.has("blocker")&&this.addBlockerClass(),allClasses.has("preload")&&(this.showPreloader(),setTimeout((()=>coreEls.forEach((el=>el.classList.remove("preload")))),500)),coreEls.forEach((el=>["js","css"].forEach((type=>el.dataset[type]?.split(",").map((f=>f.trim())).forEach((f=>this.loadFile(f)))))))}loadLazyFiles(){[{sel:".eacss .accordion-section",files:["js/accordion.min.js","accordion.min.css"]},{sel:".eacss .countdown",files:["js/countdown.min.js"]},{sel:".eacss .video[data-pid]",files:["js/video.min.js"]}].forEach((({sel:sel,files:files,callback:callback})=>{this.observeElement(sel,files,callback)})),document.querySelectorAll(".eacss [data-loader]").forEach((el=>this.observeElement(el,el.dataset.loader.split(",").map((f=>f.trim()))))),new MutationObserver((mutations=>{mutations.forEach((mutation=>{mutation.addedNodes.forEach((node=>{if(1===node.nodeType){if(node.matches?.(".eacss [data-loader]")){const files=node.dataset.loader.split(",").map((f=>f.trim()));this.observeElement(node,files)}node.querySelectorAll&&node.querySelectorAll(".eacss [data-loader]").forEach((el=>{const files=el.dataset.loader.split(",").map((f=>f.trim()));this.observeElement(el,files)}))}}))}))})).observe(document.body,{childList:!0,subtree:!0})}observeElement(selectorOrElement,files=[],callback=null){("string"==typeof selectorOrElement?document.querySelectorAll(selectorOrElement):[selectorOrElement]).forEach((el=>{if(this.observedElements.has(el))return;this.observedElements.add(el);new IntersectionObserver(((entries,observer)=>{entries.some((e=>e.isIntersecting))&&(files.forEach((f=>this.loadFile(f))),callback&&callback(el),observer.unobserve(el))}),{rootMargin:"100px 0px"}).observe(el)}))}addBlockerClass(){document.querySelectorAll('#main [class*="-container"]').forEach((el=>el.classList.add("blocker")))}showPreloader(){const preloaderImage=document.createElement("img");preloaderImage.id="pre-load-gif",preloaderImage.src="https://res.cloudinary.com/david-jones/image/upload/f_auto,q_auto/v8/eacss/v4/img/spin.gif",preloaderImage.style="\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 50%;\n\t\t\t\ttop: 50%;\n\t\t\t\tmargin: 0;\n\t\t\t\twidth: 64px;\n\t\t\t\theight: 64px;\n\t\t\t\ttransform: translate(-50%, -50%);\n\t\t\t";const wbn=window.outerWidth<1024?"70px":"150px",preloaderContainer=document.createElement("div");preloaderContainer.id="pre-load-bg",preloaderContainer.style=`\n\t\t\t\tposition: fixed;\n\t\t\t\ttop: ${wbn};\n\t\t\t\tleft: 0;\n\t\t\t\tright: 0;\n\t\t\t\tbottom: 0;\n\t\t\t\tbackground-color: #ffffff;\n\t\t\t\tz-index: 98;\n\t\t\t\t-webkit-transition: opacity 300ms, visibility 300ms;\n\t\t\t\ttransition: opacity 300ms, visibility 300ms;\n\t\t\t`,preloaderContainer.appendChild(preloaderImage),document.body.insertBefore(preloaderContainer,document.body.firstChild),document.body.style.overflow="hidden",window.addEventListener("load",(()=>{setTimeout((()=>{const gif=document.getElementById("pre-load-gif");gif&&(gif.style.display="none");const bg=document.getElementById("pre-load-bg");bg&&(bg.style.display="none"),document.body.style.overflow="auto"}),1e3)}))}init(){this.loadCoreFiles(),this.loadLazyFiles()}}).init();const smartSlickObserve=$slider=>{let wasUnslicked=!1;const checkAndInit=()=>{$slider.hasClass("slick-initialized")?$slider.hasClass("unslicked")&&(wasUnslicked=!0):(($slider=>{if(0===$slider.children().length)return;let slickOptions={};const slickAttr=$slider.attr("data-slick");if(slickAttr)try{slickOptions=JSON.parse(slickAttr)}catch(e){console.warn("Invalid data-slick JSON:",slickAttr)}if($slider.hasClass("variableWidth")&&(slickOptions.variableWidth=!0,slickAttr||(slickOptions.infinite=!1,slickOptions.slidesToScroll=1)),!$slider.hasClass("slick-initialized")){try{$slider.slick(slickOptions)}catch(err){console.error("Slick initialization failed:",err)}$slider.hasClass("variableWidth")&&$slider.on("setPosition",(function(){const $track=$slider.find(".slick-track"),$slides=$slider.find(".slick-slide"),containerWidth=$slider.width(),totalSlideWidth=$slides.toArray().reduce(((acc,slide)=>acc+$(slide).outerWidth(!0)),0);if(totalSlideWidth>containerWidth){const maxScroll=totalSlideWidth-containerWidth;$track.css("transform",`translate3d(-${maxScroll}px, 0, 0)`),$slider.off("beforeChange"),$slider.on("beforeChange",(()=>{$track.css("transform","")}))}}))}})($slider),wasUnslicked=!1)};checkAndInit();new ResizeObserver(checkAndInit).observe($slider[0]),window.addEventListener("resize",(()=>{setTimeout(checkAndInit,200)}))};$(".slick-data").each((function(){const $slider=$(this);smartSlickObserve($slider)})),$(".showthething").click((function(){return $(this).parent().find(".thething").slideToggle("fast"),$(this).find(".icon").toggleClass("flipthething"),!1}))}));